define ("qtype_coderunner/ui_practicon",["jquery","qtype_coderunner/ui_ace"],function(a,b){var d=document.getElementById("id_answer");if(null!==d){return b}function c(b,c,d,e){this.textArea=a(document.getElementById(b));this.readOnly=this.textArea.prop("readonly");this.fail=!1;this.templateParams=e;var f=0,g;this.elements=[];while(this.textArea.attr("extra-test"+f)!==void 0){try{g=JSON.parse(this.textArea.attr("extra-test"+f));if(null!==g){this.elements.push(g)}}catch(a){alert("Practicon UI, field definition "+(f+1)+" is defective")}f++}this.practiconDiv=null;this.reload()}c.prototype.failed=function(){return this.fail};c.prototype.sync=function(){var b={};this.getFields().each(function(){var c,d=a(this).attr("type"),e=a(this).attr("name");if("checkbox"===d){c=a(this).prop("checked")?1:0}else if("radio"===d){if(a(this).prop("checked")){c=a(this).val()}}else{c=a(this).val()}if(c!==void 0){if(b.hasOwnProperty(e)){alert("duplicate name '"+e+"' in interface")}b[e]=c}});this.textArea.val(JSON.stringify(b))};c.prototype.getElement=function(){if(window){if(window.MathJax){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])}}return this.practiconDiv};c.prototype.getFields=function(){return a(this.practiconDiv).find(".coderunner-ui-element")};c.prototype.reload=function(){var b=a(this.textArea).val(),c={},d={},e="<div style='height:fit-content' class='qtype-coderunner-html-outer-div fcontainer clearfix'>",f=function(a,b,c){var f=a.name,g=a.type,h=a.label,j=a.text,k=b[f],l,m;if(!g){g="text"}if(!h){h="variable '"+f+"'"}if(!f){alert("Practicon UI: name missing at "+c)}if(d[f]){alert("Practicon UI: variable '"+f+"' multiple use")}if(!k){k=""}m="<div class='form-group row fitem'><div class='col-md-3'><label class='col-form-label d-inline mx-2 answerprompt'>"+h+"</label></div><div class='col-md-9 form-inline felement edit_code' data-fieltype='"+g+"'>";if("text"===g){m+="<input type='text' class='coderunner-ui-element mform form-inline form-control mx-2' style='width: 100%' name='"+f+"' id='"+f+"' value='"+k+"' size='80'/>"}else if("checkbox"===g){m+="<label><input type='checkbox' class='coderunner-ui-element form-check-input mx-2' name='"+f+"' id='"+f+(k?"' checked='1' />":"' />")+j+"</label>"}else if("textarea"===g){m+="<textarea class='coderunner-ui-element edit_code mform form-control d-block mx-2' name='"+f+"' id='"+f+"' rows='4'>"+k+"</textarea>"}else if("radio"===g){m+="<div>";for(l=0;l<j.length;l++){m+="<p><input type='radio' name='"+f+"' class='coderunner-ui-element form-radio-input mx-2' value='"+(l+1)+(k==l+1?"' checked>":"'>")+j[l]+"</p>"}e+="</div>"}m+="</div></div>";return m};if(b){try{c=JSON.parse(b)}catch(a){alert("No values to load")}}this.elements.forEach(function(a,b){e+="<div class='fcontainer clearfix'>";if(Array.isArray(a)){a.forEach(function(a){e+=f(a,c,b)})}else{e+=f(a,c,b)}e+="</div>"});e+="</div>";this.practiconDiv=a(e)};c.prototype.resize=function(){};c.prototype.hasFocus=function(){var a=!1;this.getFields().each(function(){if(this===document.activeElement){a=!0}});return a};c.prototype.destroy=function(){this.sync();a(this.practiconDiv).remove();this.practiconDiv=null};return{Constructor:c}});
//# sourceMappingURL=ui_practicon.min.js.map
