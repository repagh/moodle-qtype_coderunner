define ("qtype_coderunner/ui_practicon",["jquery","qtype_coderunner/ui_ace"],function(a,b){var d=document.getElementById("id_answer");if(null!==d){return b}function c(b,c,d,e){this.textArea=a(document.getElementById(b));this.readOnly=this.textArea.prop("readonly");this.fail=!1;this.templateParams=e;var f=0,g;this.elements=[];while(this.textArea.attr("extra-test"+f)!==void 0){try{g=JSON.parse(this.textArea.attr("extra-test"+f));if(null!==g){this.elements.push(g)}}catch(a){alert("Practicon UI, field definition "+(f+1)+" is defective")}f++}this.practiconDiv=null;this.reload()}c.prototype.failed=function(){return this.fail};c.prototype.sync=function(){var b={};this.getFields().each(function(){var c,d=a(this).attr("type"),e=a(this).attr("name");if("checkbox"===d){c=a(this).prop("checked")?1:0}else if("radio"===d){if(a(this).prop("checked")){c=a(this).val()}}else{c=a(this).val()}if(c!==void 0){if(b.hasOwnProperty(e)){alert("duplicate name '"+e+"' in interface")}b[e]=c}});this.textArea.val(JSON.stringify(b))};c.prototype.getElement=function(){if(window){if(window.MathJax){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])}}return this.practiconDiv};c.prototype.getFields=function(){return a(this.practiconDiv).find(".coderunner-ui-element")};c.prototype.reload=function(){var b=a(this.textArea).val(),c={},d={},e="<div style='height:fit-content' class='qtype-coderunner-html-outer-div fcontainer clearfix'>",f=function(a,b,c){var e=a.name,f=a.type,g=a.label,h=a.text,j=b[e],k,l;if(!f){f="text"}if(!g){g="variable '"+e+"'"}if(!e){alert("Practicon UI: name missing at "+c)}if(d[e]){alert("Practicon UI: variable '"+e+"' multiple use")}if(!j){j=""}l="<div class='form-group row fitem border-bottom px-4'>";if("text"===f){l+="<div class='col-md-8'><label class='col-form-label d-inline answerprompt'>"+g+"</label></div><div class='col-md-4 form-inline felement edit_code' data-fieldtype='text'><input type='text' class='coderunner-ui-element mform form-inline form-control' style='width: 100%' name='"+e+"' id='"+e+"' value='"+j+"' size='80'/></div>"}else if("checkbox"===f){l+="<div class='col-md-1 form-inline felement edit_code' data-fieldtype='checkbox'><input type='checkbox' class='coderunner-ui-element form-check-input' name='"+e+"' id='"+e+(j?"' checked='1' />":"' />")+"</div><div class='col-md-11'><label class='col-form-label d-inline answerprompt'>"+h+"</label></div>"}else if("textarea"===f){l+="<div class='col-md-4'><label class='col-form-label d-inline answerprompt'>"+g+"</label></div><div class='col-md-8 form-inline felement edit_code' data-fieldtype='textarea'><textarea class='coderunner-ui-element edit_code mform form-control d-block' name='"+e+"' id='"+e+"' rows='3'>"+j+"</textarea></div>"}else if("radio"===f){for(k=0;k<h.length;k++){l+="<div class='col-md-1 form-inline felement edit_code' data-fieldtype='radio'><input type='radio' name='"+e+"' class='coderunner-ui-element form-radio-input' value='"+(k+1)+(j==k+1?"' checked/>":"'/>")+"</div><div class='col-md-11'><label class='col-form-label d-inline answerprompt'>"+h[k]+"</label></div>"}}l+="</div>";return l};if(b){try{c=JSON.parse(b)}catch(a){alert("No values to load")}}this.elements.forEach(function(a,b){e+="<div class='fcontainer clearfix'>";if(Array.isArray(a)){a.forEach(function(a){e+=f(a,c,b)})}else{e+=f(a,c,b)}e+="</div>"});e+="</div>";this.practiconDiv=a(e)};c.prototype.resize=function(){};c.prototype.hasFocus=function(){var a=!1;this.getFields().each(function(){if(this===document.activeElement){a=!0}});return a};c.prototype.destroy=function(){this.sync();a(this.practiconDiv).remove();this.practiconDiv=null};return{Constructor:c}});
//# sourceMappingURL=ui_practicon.min.js.map
